(function(){function d(a,b){b=b||[],this._proto=a,this._traits={};var c=b.length||0;while(c--)this._traits[b[c]]=!0}function e(){var a={};this.meta=function(b,c,d){return b&&c?(a[b]?a[b].frozen||(a[b].value=c):a[b]={value:c},d&&d.freeze&&(a[b].frozen=!0),a[b].value):a[b]?a[b].value||null:null}}var a=Object.prototype.toString,b={},c=Array.isArray||function(a){return a.push&&"length"in a};d.prototype={has:function(a){return!!this._traits[a]},add:function(a){if(c(a)){var b=a.length,d=e.traits,f=this._proto,g;while(b--)this._traits[a[b]]=!0,g=d[a[b]],g&&g(f)}else this._traits[a]=!0,e.traits[a](this._proto)},remove:function(a){delete this._traits[a]}},e.prototype={init:[]},b.traits=e.traits={},b.class=e.class=function(a){a=a||[];var b=function(){e.apply(this,arguments);var a=this.init.length;while(a--)this.init[a](this)};return b.prototype=new e,b.prototype.init=b.prototype.init.concat([]),b.traits=new d(b.prototype,a),b.traits.add(a),b},b.trait=e.trait=function(b,d,f){arguments.length===2&&(f=d);var g=e.traits;if(!f)return g[b]||null;c(d)?d.push(f):d=[f],g[b]=function(b){var c=d.length,e;while(c--){e=d[c],typeof e=="string"&&(e=g[e]);if(a.call(e)=="[object Function]")e(b);else for(var f in e)b[f]=e[f]}}},b.create=function(a,c){var d=b.class(a);return new d(c)},typeof module!="undefined"?module.exports=b:window.Thing=b})()